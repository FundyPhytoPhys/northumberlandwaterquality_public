# Project Title
Patterns of Microbial Contamination on Northumberland Strait Shores

## Summary

The re-emergence of episodic faecal contamination of Parlee and Murray Corner beaches, on the Northumberland Strait of New Brunswick, Canada, in 2017, raised renewed community concerns on the health, environmental and tourism sustainability of these community resources. In response we have to date compiled, curated and made accessible 205,772 microbial water quality data records spanning over 80 years from Southeastern New Brunswick and the Northumberland Strait. 

This dataset derives in large part from Shellfish Surveys completed by Environment and Climate Change Canada, along with data generated by multiple government agencies, Non-Governmental Organizations and citizen science sources. Records derived from these multiple sources are now deposited in the Gordon Foundation’s DataStream (https://atlanticdatastream.ca), an open access common platform for sharing structured information on fresh and marine water health, delivered on a pan-Canadian scale, in collaboration with regional monitoring networks. 

Here we use data accessed through DataStream’s Public API, along with weather data accessed from Environment and Climate Change Canada, to analyze patterns of microbial contamination of estuarine and coastal shores over time, and weather, at three contrasting sites with different land usages, along the Northumberland Strait of New Brunswick. 

## Highly Qualified Personnel

- Miranda E. Corkum, Mount Allison University, mcorkum@mta.ca

- Naaman M. Omar, Mount Allison University, nomar@mta.ca

## Principle Investigators

- Douglas A. Campbell, Mount Allison University, dcampbel@mta.ca, ORCID 0000-0001-8996-5463

## Primary Contact  

- Douglas A. Campbell, Mount Allison University, dcampbel@mta.ca, ORCID 0000-0001-8996-5463

## Data sources

- Gordon Foundation’s DataStream (https://atlanticdatastream.ca)
Ref: Foundation G. DataStream. 2023. Available: https://gordonfoundation.ca/initiatives/datastream/

- New Brunswick Department of Health (https://www2.gnb.ca/content/gnb/en/departments/ocmoh/health_advisories/beachadvisories.html) 
Ref: New Brunswick Department of Health. Government of New Brunswick Provincial Park Beach Information. 2017. Available: https://beaches.gnb.ca/

- Environment and Climate Change Canada Shellfish Water Classification Program (https://open.canada.ca/data/en/dataset/c8337cee-88b6-4ce5-89db-ba2ba22f2180#wb-auto-6) 
Ref: Environment and Climate Change Canada. Shellfish Water Classification Program Marine Water Quality Data in New Brunswick. Open Canada; 2020. Available: https://open.canada.ca/data/en/dataset/c8337cee-88b6-4ce5-89db-ba2ba22f2180#wb-auto-6

- Environment and Climate Change Canada Historical Climate Data (https://climate.weather.gc.ca)
Ref: Environment and Climate Change Canada. Historical Climate Data Extracted from the Environment and Climate Change Canada Historical Climate Data web site. 2023. Available: https://climate.weather.gc.ca

## Funding sources

- This project was funded by the DAC's Canadian Research Chair Grant in Phytoplankton Ecophysiology, New Brunswick Department of Health, New Brunswick Innovation Foundation, New Brunswick Environmental Trust Fund and was supported by DataStream. 

## Keywords

water quality, Northumberland Strait, New Brunswick, DataStream, *Escherichia coli*

## Additional information and support

- Sensitive Data Flag - Human Participants:  NO
- Sensitive Data Flag - Indigenous Partnerships: NO
- Sensitive Data Flag - Government Partnerships: NO
- Sensitive Data Flag - Industry Partnerships: NO
- Access Restrictions: NO

## Software  

Precipitation and air temperature data for the three sites were accessed from Environment and Climate Change Canada [@environmentandclimatechangecanadaHistoricalClimateData2023] using the 'weathercan' [@R-weathercan] package. Assembly of bacterial count data, weather data, analysis and presentation were done using done using the 'knitr' [@R-knitr], 'tidyverse' [@R-tidyverse], 'datastreamr' [@R-datastreamr], 'lutz' [@R-lutz], 'kableExtra' [@R-kableExtra], 'googlesheets4' [@R-googlesheets4], 'viridis' [@R-viridis], 'stats' [@R-stats] and [@R-broom] packages running under R and R Studio (Posit Team, 2023; R Core Team, 2023).  

## Repo content information

Use the space below to summarize the structure of the repository with a description of each folder, as applicable.

### Data Dictionary

Data Dictionary can be found: DataIn/"DataDictionary.Rds"

### DataIn

Created in Google Sheets and accessed using "NorthumberlandManuscript.Rmd" (https://docs.google.com/spreadsheets/d/1HyLRlI2qI4KmYXvHeqayAA8NbXNvIgN8FEWzSyLQm10/edit#gid=0") 
  "DataDictionary.Rds"

Accessed from Gordon Foundation’s DataStream (https://atlanticdatastream.ca) using "DataStreamImport.Rmd"
  "DataStreamALL.Rds"

Downloaded from New Brunswick Department of Health (https://www2.gnb.ca/content/gnb/en/departments/ocmoh/health_advisories/beachadvisories.html)   "Parlee_Data_2022_23.csv"
  "Parlee_Status_2022_23.csv"

Accessed from Environment and Climate Change Canada Shellfish Water Classification Program (https://open.canada.ca/data/en/dataset/c8337cee-88b6-4ce5-89db-ba2ba22f2180#wb-auto-6) 
  "Shellfish_Samples_Mollusques_Echantillons_NB.csv"
  "Shellfish_Sites_Mollusques_NB.csv"

Downloaded from from Environment and Climate Change Canada Historical Climate Data (https://climate.weather.gc.ca). Daily historic tidal height data 1985 - 2021, Shediac Bay Station 1805. For use in future data exploration.
  "ShediacBay_Daily_Tides_1985_2021.csv"
  

### TidiedData

Generated in Code/ShellfishSurvey_DSConvert.Rmd
  "ECCCDataKouchShediac.Rds"

Generated in Code/"NBBeaches_DSConvert.Rmd" for direct upload to DataStream:
  "Parlee_2022_23.csv"

Generated in Code/"DataStreamImport.Rmd"
  "KouchData.Rds"
  "ShediacData.Rds"
  "ParleeData.Rds"

Generated in Code/"WeatherCanImport.Rmd"
  "KouchWeatherDay.Rds"
  "ShediacWeatherDay.Rds"

### ProcessedData

Generated in Code/"DataClean.Rmd"
  "KouchShediacParleeData.Rds"

### Code

# Code Read Me

DataStreamImport.Rmd

This script uses packages to support direct import of marine microbial contamination data via public API from DataStream (https://atlanticdatastream.ca, "Mount Allison Phyto Lab Data" dataset). The imported data (DataIn/"DataStreamALL.Rds") contains ECCC Shellfish Survey data only until year 2015. Code/"ShellfishSurvey_DSConvert.Rmd" generates DataStream formatted ECCC Shellfish Survey data for years 2016-2022 for Kouchibouguac and Shediac Bays (ProcessedData/"ECCCDataKouchShediac.Rds"). The DataStream and updated ECCC Shellfish Survey datasets are combined, subset into three Northumberland Strait study sites (Kouchibouguac Bay, Shediac Bay and Parlee Beach Provincial Park), and saved as .Rds files for further manipulation in Code/"DataClean.Rmd".


WeatherCanImport.Rmd

This script uses packages to support direct import of Environment and Climate Change Canada weather (and tide) data into R. New columns are added generating variables used in a Shiny app (Code/"Facet_app_WQ.R") for data exploration. Weather data are saved as TidiedData/"KouchWeatherDay.Rds", "ShediacWeatherDay.Rds" for further use in Code/"DataClean.Rmd".


ShellfishSurvey_DSConvert.Rmd

This script uses packages to import and format Environment and Climate Change Canada Shellfish Survey data from "Shellfish Water Classification Program – Marine Water Quality Data in New Brunswick" for years 2016-2022. Data is downloaded manually as .csv from the Open Government Data Portal as two separate files a) bacteria data: DataIn/"Shellfish_Samples_Mollusques_Echantillons_NB.csv" and b) monitoring location data: DataIn/"Shellfish_Sites_Mollusques_NB.csv". These file are then imported into R for tidying and conversion to DataStream upload format (TidiedData/"ECCCDataKouchShediac.Rds"). This new data is added to the existing DataStream dataset and further manipulated in Code/"DataStreamImport.Rmd". Note: the Kouchibouguac Bay and Shediac Bay datasets targeted for update in this script were not uploaded to DataStream because the DataStream team are currently working to implement an automated direct data download process from the ECCC Shellfish Survey database.


NBBeaches_DSConvert.Rmd

This script uses packages to import and tidy New Brunswick Provincial Park Beach monitoring data (https://beaches.gnb.ca). Data is downloaded manually as .xlsx, saved as .csv (DataIn/"Parlee_Status_2022_23.csv", "Parlee_Data_2022_23.csv") and imported into R for tidying and conversion to DataStream upload format (https://atlanticdatastream.ca). Here Parlee Beach Provincial Park data is imported for years 2022-23, tidied and saved as TidiedData/"Parlee_2022_23.csv" for direct upload to DataStream.


DataClean.Rmd

This script uses packages to combine marine microbial contamination data from DataStream (https://atlanticdatastream.ca) and weather data from Environment and Climate Change Canada (https://climate.weather.gc.ca/historical_data/search_historic_data_e.html) previously imported via API (Code/"DataStreamImport.Rmd", "WeatherCanImport.Rmd") at three sites on the Northumberland Strait: Shediac Bay, Kouchibouguac Bay and Parlee Beach Provincial Park. This combined bacteria/weather dataset (ProcessedData/"KouchShediacParleeData.Rds") is loaded into a Shiny app (Code/"Facet_app_WQ.R") to visualize water quality patterns. Based on those visualizations, statistical models and plots are then generated (see Code/"DataProcess.Rmd").


DataProcess.Rmd

This script takes the combined bacteria/weather data file generated in "DataClean.Rmd" (ProcessedData/"KouchShediacParleeData.Rds") and applies a binomial model to test for interactions between variables. Various tables and figures are generated for use in the final manuscript "NorthumberlandManuscript.Rmd" (Figures/"StatsAll_table1.rds", "StatsAll_table2.rds", "KouchShediacParleeBinom_fig.png", "StatsAll_table3.rds", "precip_prior48_fig.png", "measurement_date_fig.png", "mean_temp_prior48_fig.png").


Facet_app_WQ.R

Northumberland Water Quality Simple Shiny App used for data exploration.

### Figures

Figures and tables generated using Code/"DataProcess.Rmd":

"StatsAll_table1.rds"
"StatsAll_table2.rds"
"KouchShediacParleeBinom_fig.png"
"StatsAll_table3.rds"
"precip_prior48_fig.png"
"measurement_date_fig.png"
"mean_temp_prior48_fig.png"

Map generated using Google Earth and called into "NorthumberlandManuscript.Rmd":
"Map_Study_Sites.png"
"map.pdf"

